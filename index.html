<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathHelper - Assistant IA pour les mathématiques</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>MathHelper <i class="fas fa-robot"></i></h1>
            <p>Votre assistant IA pour résoudre les problèmes mathématiques et comprendre les concepts difficiles</p>
        </header>
        
        <div class="main-content">
            <div class="calculator">
                <h2>Calculatrice Intelligente</h2>
                
                <div class="calculator-display">
                    <div class="calculator-history" id="calc-history"></div>
                    <div class="calculator-result" id="calc-result">0</div>
                </div>
                
                <div class="calculator-buttons">
                    <button class="calc-btn clear" onclick="clearCalculator()">C</button>
                    <button class="calc-btn operator" onclick="backspace()">⌫</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('%')">%</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('/')">/</button>
                    
                    <button class="calc-btn" onclick="appendToDisplay('7')">7</button>
                    <button class="calc-btn" onclick="appendToDisplay('8')">8</button>
                    <button class="calc-btn" onclick="appendToDisplay('9')">9</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('*')">×</button>
                    
                    <button class="calc-btn" onclick="appendToDisplay('4')">4</button>
                    <button class="calc-btn" onclick="appendToDisplay('5')">5</button>
                    <button class="calc-btn" onclick="appendToDisplay('6')">6</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('-')">-</button>
                    
                    <button class="calc-btn" onclick="appendToDisplay('1')">1</button>
                    <button class="calc-btn" onclick="appendToDisplay('2')">2</button>
                    <button class="calc-btn" onclick="appendToDisplay('3')">3</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('+')">+</button>
                    
                    <button class="calc-btn" onclick="appendToDisplay('0')">0</button>
                    <button class="calc-btn" onclick="appendToDisplay('.')">.</button>
                    <button class="calc-btn equals" onclick="calculate()">=</button>
                </div>
                
                <div class="input-group">
                    <label for="problem">Ou décrivez votre problème :</label>
                    <textarea id="problem" placeholder="Exemple: Calculer 15% de 200, ou résoudre 3x + 5 = 20..."></textarea>
                </div>
                <button id="solve-btn" onclick="solveWithAI()">
                    <i class="fas fa-calculator"></i> Résoudre avec l'IA
                </button>
                
                <div class="loading" id="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>L'IA analyse votre problème...</p>
                </div>
                
                <div class="solution" id="solution">
                    <h3>Solution :</h3>
                    <div class="solution-content" id="solution-content">
                        La solution apparaîtra ici...
                    </div>
                </div>
            </div>
            
            <div class="features">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Explications détaillées</h3>
                        <p>Obtenez des explications étape par étape pour comprendre la méthode de résolution, pas seulement la réponse finale.</p>
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Adapté à tous les niveaux</h3>
                        <p>Du collège à l'université, notre IA s'adapte à votre niveau pour fournir des explications appropriées.</p>
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Apprentissage intelligent</h3>
                        <p>L'IA identifie vos difficultés et suggère des exercices complémentaires pour progresser efficacement.</p>
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Calculs complexes</h3>
                        <p>Résolvez des équations, des pourcentages, des fractions et bien plus avec notre calculatrice avancée.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        
        let currentInput = '0';
        let calculationHistory = '';
        let shouldResetScreen = false;
        
        
        const calcResultElement = document.getElementById('calc-result');
        const calcHistoryElement = document.getElementById('calc-history');
        const solutionContent = document.getElementById('solution-content');
        const loadingDiv = document.getElementById('loading');
        const solutionDiv = document.getElementById('solution');
        
      
        function updateDisplay() {
            calcResultElement.textContent = currentInput;
            calcHistoryElement.textContent = calculationHistory;
        }
        

        function appendToDisplay(value) {
            if (currentInput === '0' || shouldResetScreen) {
                currentInput = value;
                shouldResetScreen = false;
            } else {
                currentInput += value;
            }
            updateDisplay();
        }
        
  
        function clearCalculator() {
            currentInput = '0';
            calculationHistory = '';
            shouldResetScreen = false;
            updateDisplay();
        }
        
      
        function backspace() {
            if (currentInput.length > 1) {
                currentInput = currentInput.slice(0, -1);
            } else {
                currentInput = '0';
            }
            updateDisplay();
        }
        
        
        function calculate() {
            try {
            
                calculationHistory = currentInput + ' =';
                
                
                let expression = currentInput.replace(/×/g, '*').replace(/÷/g, '/');
                
            
                expression = expression.replace(/(\d+)%/g, function(match, number) {
                    return number / 100;
                });
                
                
                const result = eval(expression);
                
            
                currentInput = Number.isInteger(result) ? result.toString() : result.toFixed(4).toString();
                updateDisplay();
                
              
                shouldResetScreen = true;
            } catch (error) {
                currentInput = 'Erreur';
                updateDisplay();
                shouldResetScreen = true;
            }
        }
        
        
        function solveWithAI() {
            const problemText = document.getElementById('problem').value.trim();
            
            if (!problemText && currentInput === '0') {
                solutionContent.innerHTML = "<p style='color: red;'>Veuillez entrer un problème à résoudre ou utiliser la calculatrice.</p>";
                solutionDiv.style.display = 'block';
                return;
            }
            
        
            loadingDiv.style.display = 'block';
            solutionDiv.style.display = 'none';
            
            
            const inputToProcess = problemText || currentInput;
            
            
            setTimeout(() => {
                loadingDiv.style.display = 'none';
                solutionDiv.style.display = 'block';
                
          
                let simulatedSolution = generateSolution(inputToProcess);
                solutionContent.innerHTML = simulatedSolution;
            }, 1500);
        }
        
        
        function generateSolution(input) {
          
            try {
                
                if (input.includes('=')) {
                    const equationParts = input.split('=');
                    if (equationParts.length === 2) {
                        return solveEquation(equationParts[0].trim(), equationParts[1].trim());
                    }
                }
                
                
                let expression = input.replace(/×/g, '*')
                                      .replace(/÷/g, '/')
                                      .replace(/(\d+)%/g, '(($1)/100)');
                
              
                if (!/[a-zA-Z]/.test(expression)) {
                    const result = eval(expression);
                    return `
                        <p><strong>Expression:</strong> ${input}</p>
                        <p><strong>Résultat:</strong> ${result}</p>
                        <p><strong>Explication:</strong> L'expression a été évaluée directement.</p>
                    `;
                }
            } catch (e) {
                
            }
            
        
            if (input.includes('dérivée') || input.includes('dériver')) {
                return `
                    <p><strong>Problème:</strong> ${input}</p>
                    <p><strong>Solution:</strong></p>
                    <p>Pour calculer une dérivée, on utilise les règles de dérivation :</p>
                    <p>1. La dérivée de xⁿ est n*xⁿ⁻¹</p>
                    <p>2. La dérivée d'une constante est 0</p>
                    <p>3. La dérivée d'une somme est la somme des dérivées</p>
                    <p>4. La dérivée de sin(x) est cos(x)</p>
                    <p>5. La dérivée de cos(x) est -sin(x)</p>
                `;
            } else if (input.includes('intégrale') || input.includes('intégrer')) {
                return `
                    <p><strong>Problème:</strong> ${input}</p>
                    <p><strong>Solution:</strong></p>
                    <p>Pour calculer une intégrale, on cherche une primitive de la fonction.</p>
                    <p>Une primitive de xⁿ est xⁿ⁺¹/(n+1) (pour n ≠ -1)</p>
                    <p>L'intégrale se calcule en trouvant cette primitive puis en évaluant la différence entre les bornes.</p>
                `;
            } else if (input.includes('théorème') || input.includes('pythagore')) {
                return `
                    <p><strong>Problème:</strong> ${input}</p>
                    <p><strong>Solution:</strong></p>
                    <p>Le théorème de Pythagore : dans un triangle rectangle, le carré de l'hypoténuse est égal à la somme des carrés des deux autres côtés.</p>
                    <p>Si a et b sont les longueurs des côtés de l'angle droit, et c la longueur de l'hypoténuse, alors :</p>
                    <p>a² + b² = c²</p>
                `;
            } else if (input.includes('pourcent') || input.includes('%')) {
                return `
                    <p><strong>Problème:</strong> ${input}</p>
                    <p><strong>Solution:</strong></p>
                    <p>Pour calculer un pourcentage :</p>
                    <p>1. Pour calculer x% d'une valeur y : (x/100) * y</p>
                    <p>2. Pour calculer quel pourcentage représente x par rapport à y : (x/y) * 100</p>
                    <p>3. Pour ajouter x% à une valeur y : y + (x/100)*y</p>
                    <p>4. Pour retirer x% d'une valeur y : y - (x/100)*y</p>
                `;
            } else {
                return `
                    <p><strong>Problème:</strong> ${input}</p>
                    <p><strong>Solution:</strong></p>
                    <p>L'IA a analysé votre problème et recommande les étapes suivantes :</p>
                    <ol>
                        <li>Identifiez les données connues et inconnues</li>
                        <li>Choisissez la formule ou le théorème approprié</li>
                        <li>Appliquez la formule avec les valeurs connues</li>
                        <li>Simplifiez l'expression obtenue</li>
                        <li>Vérifiez la cohérence du résultat</li>
                    </ol>
                    <p>Pour une aide plus spécifique, essayez de formuler votre problème avec plus de détails.</p>
                `;
            }
        }
    
        function solveEquation(left, right) {
            try {
            
                if (left.includes('x') && !right.includes('x')) {
                    
                    const xIndex = left.indexOf('x');
                    let a = 1, b = 0;
                    
                    
                    if (xIndex > 0) {
                        const aPart = left.substring(0, xIndex).trim();
                        if (aPart === '+' || aPart === '') a = 1;
                        else if (aPart === '-') a = -1;
                        else a = parseFloat(aPart);
                    }
                    
                  
                    const operators = left.split(/[0-9x]/).filter(op => op !== '');
                    const numbers = left.split(/[+-\s]/).filter(num => num !== '' && num !== 'x');
                    
                    if (numbers.length > 1) {
                        b = parseFloat(numbers[1]);
                        if (operators[1] === '-') b = -b;
                    }
                    
                    const c = parseFloat(right);
                    const solution = (c - b) / a;
                    
                    return `
                        <p><strong>Équation:</strong> ${left} = ${right}</p>
                        <p><strong>Solution:</strong></p>
                        <p>Pour résoudre l'équation ${a}x + ${b} = ${c} :</p>
                        <p>${a}x = ${c} - ${b}</p>
                        <p>${a}x = ${c - b}</p>
                        <p>x = ${c - b} / ${a}</p>
                        <p><strong>Solution:</strong> x = ${solution}</p>
                    `;
                }
            } catch (e) {
          
            }
            
            return `
                <p><strong>Équation:</strong> ${left} = ${right}</p>
                <p><strong>Méthode de résolution:</strong></p>
                <p>Pour résoudre une équation, il faut isoler l'inconnue (généralement x) d'un côté du signe égal.</p>
                <p>1. Regroupez tous les termes avec x d'un côté et les constantes de l'autre</p>
                <p>2. Simplifiez chaque côté</p>
                <p>3. Divisez pour obtenir x = valeur</p>
                <p>4. Vérifiez votre solution en remplaçant x par la valeur trouvée</p>
            `;
        }
        
  
        updateDisplay();
    </script>
</body>
</html>